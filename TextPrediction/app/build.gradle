/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details on building Java & JVM projects, please refer to https://docs.gradle.org/8.4/userguide/building_java_projects.html in the Gradle documentation.
 */

plugins {
    // Apply the application plugin to add support for building a CLI application in Java.
    id 'application'
    id 'checkstyle'
}

group = 'com.example'
version = '0.1.0-SNAPSHOT'

sourceSets {
    main {
        java {
            srcDirs = ['src/main/java']
        }
        resources {
            srcDirs = ['src/main/resources']
        }
    }
    
    test {
        java {
            srcDirs = ['src/test/java']  // Adjust this if your test java files are in a different directory
        }
        resources {
            srcDirs = ['src/test/resources']  // Adjust this if your test resources are in a different directory
        }
    }
}

dependencies {
    // Use JUnit Jupiter API for testing. The 'testImplementation' should be used for Jupiter API
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.9.3'
    // Use JUnit Jupiter Params for parameterized tests (if needed)
    testImplementation 'org.junit.jupiter:junit-jupiter-params:5.9.3'
    // Use JUnit Jupiter Engine to run tests
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.9.3'

    // This dependency is used by the application.
    implementation 'com.google.guava:guava:32.1.1-jre'

    //Apache POI dependency
    implementation 'org.apache.poi:poi-ooxml:5.2.2'

    // Log4j2 API
    implementation 'org.apache.logging.log4j:log4j-api:2.14.1'

    // Log4j2 Core
    implementation 'org.apache.logging.log4j:log4j-core:2.14.1'

}

tasks.withType(JavaCompile) {
    javaCompiler = javaToolchains.compilerFor {
        languageVersion = JavaLanguageVersion.of(11)
    }
}

checkstyle {
    toolVersion = '9.0'
    // Make sure to point to the actual Checkstyle config file, not just the directory
    config = resources.text.fromFile("${rootProject.projectDir}/app/config/checkstyle/checkstyle.xml")
  
    ignoreFailures = true
    showViolations = true
    //configDir = file("${rootProject.projectDir}/app/config/checkstyle")
    //configFile = file("${configDir}/checkstyle.xml")
    //configProperties = [
                //'configDir': configDir,
                //'baseDir'  : rootDir,
        //]
}

application {
    // Define the main class for the application.
    mainClass = 'TextPrediction.App'
    //Define System.in as standard input
    run.standardInput = System.in
    //rootProject.name = 'Markov name generator"
}

test {
    // Use JUnit Platform for unit tests.
    useJUnitPlatform()
    maxHeapSize = '1G'
    testLogging {
        events "passed", "skipped", "failed"
        showStandardStreams = true
        exceptionFormat = 'full'
    }
    dependsOn 'checkstyleMain','checkstyleTest'
    //Including all test classes ending with 'Test'
    include '**/*Test.class'  // Include all classes ending with Test

}

